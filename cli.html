<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CLI - Perseus Book</title>
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="setup.html"><strong aria-hidden="true">2.</strong> Setup</a></li><li class="chapter-item expanded "><a href="arch.html"><strong aria-hidden="true">3.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="tutorials/first_app/intro.html"><strong aria-hidden="true">4.</strong> Building Your First App</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="tutorials/first_app/setup.html"><strong aria-hidden="true">4.1.</strong> Installation and Setup</a></li></ol></li><li class="chapter-item expanded "><a href="cli.html" class="active"><strong aria-hidden="true">5.</strong> CLI</a></li><li class="chapter-item expanded "><a href="templates.html"><strong aria-hidden="true">6.</strong> Templates</a></li><li class="chapter-item expanded "><a href="routing.html"><strong aria-hidden="true">7.</strong> Routing</a></li><li class="chapter-item expanded "><a href="error_pages.html"><strong aria-hidden="true">8.</strong> Error Pages</a></li><li class="chapter-item expanded "><a href="strategies/intro.html"><strong aria-hidden="true">9.</strong> Rendering Strategies</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="strategies/build_paths.html"><strong aria-hidden="true">9.1.</strong> Build Paths</a></li><li class="chapter-item expanded "><a href="strategies/build_state.html"><strong aria-hidden="true">9.2.</strong> Build State</a></li><li class="chapter-item expanded "><a href="strategies/request_state.html"><strong aria-hidden="true">9.3.</strong> Request State</a></li><li class="chapter-item expanded "><a href="strategies/revalidation.html"><strong aria-hidden="true">9.4.</strong> Revalidation</a></li><li class="chapter-item expanded "><a href="strategies/incremental.html"><strong aria-hidden="true">9.5.</strong> Incremental generation</a></li></ol></li><li class="chapter-item expanded "><a href="building.html"><strong aria-hidden="true">10.</strong> Building</a></li><li class="chapter-item expanded "><a href="serving.html"><strong aria-hidden="true">11.</strong> Serving</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="integrations/actix-web.html"><strong aria-hidden="true">11.1.</strong> Actix Web Integration</a></li></ol></li><li class="chapter-item expanded "><a href="config_managers.html"><strong aria-hidden="true">12.</strong> Config Managers</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Perseus Book</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="cli"><a class="header" href="#cli">CLI</a></h1>
<p>Perseus has a CLI (command line interface) designed to make your life significantly easier when developing Perseus apps. Its primary functions are to build and serve your apps for you, meaning you can focus pretty much entirely on your application code and ignore all the boilerplate!</p>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<p>You can install the Perseus CLI by running <code>cargo install perseus-cli</code>, it should then be available as <code>perseus</code> on your system!</p>
<p>We currently don't provide independent executables installable without <code>cargo</code> because you'll need <code>cargo</code> and Rust generally to be able to write a Perseus app, and Perseus depends on the <code>cargo</code> commands being available, so there's really no point. That said, if you have a use-case for this, please <a href="https://github.com/arctic-hen7/perseus/issues/new/choose">open an issue</a>!</p>
<h2 id="setup"><a class="header" href="#setup">Setup</a></h2>
<p>Set up a library project with <code>cargo</code>, and add the following to the <code>[dependencies]</code> section in your <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">perseus = { path = &quot;../../packages/perseus&quot; }
sycamore = { version = &quot;0.5.1&quot;, features = [&quot;ssr&quot;] }
sycamore-router = &quot;0.5.1&quot;
# You only need these for pages that take properties
serde = { version = &quot;1&quot;, features = [&quot;derive&quot;] }
serde_json = &quot;1&quot;
</code></pre>
<p>Then, add a <code>lib.rs</code> file to your project under <code>src/</code> that contains the following:</p>
<pre><pre class="playground"><code class="language-rust edition2018">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>mod pages;
mod error_pages;

use perseus::define_app;

#[derive(perseus::Route)]
pub enum Route {
    #[to(&quot;/&quot;)]
    Index,
    #[to(&quot;/about&quot;)]
    About,
    #[not_found]
    NotFound,
}
define_app!{
    root: &quot;#root&quot;,
    route: Route,
    router: {
        Route::Index =&gt; [
            &quot;index&quot;.to_string(),
            pages::index::template_fn()
        ],
        Route::About =&gt; [
            &quot;about&quot;.to_string(),
            pages::about::template_fn()
        ]
    }
    error_pages: crate::error_pages::get_error_pages(),
    templates: [
        crate::pages::index::get_template::&lt;G&gt;(),
        crate::pages::about::get_template::&lt;G&gt;()
    ]
    // config_manager: perseus::FsConfigManager::new()
}
<span class="boring">}
</span></code></pre></pre>
<p>This assumes you've defined a function to get your error pages elsewhere (you can read more about that <a href="error_pages.html">here</a>), and that it's in a module called <code>error_pages</code>, you can customize that as needed.</p>
<p>The way the rest of this works is pretty simple. First off, you define a router with <a href="https://sycamore-rs.netlify.app/docs/advanced/routing">Sycamore</a>, which defines each of your templates and the paths on your site that it will accept. This <strong>must</strong> have a variant explicitly named <code>NotFound</code>, that's handled for you. Then, you define your app itself, which takes the following properties (which need to be in order right now!):</p>
<ul>
<li><code>root</code> – the CSS selector for the element to render Perseus to, which should be unique, like an HTML <code>id</code></li>
<li><code>route</code> – the <code>enum</code> for your app's routes that you just defined</li>
<li><code>router</code> – a match-like input that handles each of the variants of your <code>route</code>, except <code>NotFound</code> (handled for you); each one gets mapped to the corresponding page's path (e.g. <code>Post</code> with slug <code>test</code> might be mapped to <code>format!(&quot;post/{}&quot;, slug)</code>), which shouldn't include a leading or trailing <code>/</code></li>
<li><code>error_pages</code> – your <a href="error_pages.html">error pages</a></li>
<li><code>templates</code> – each of your templates, taking the <code>G</code> parameter (which will be used at runtime to render them for the server or the client)</li>
<li><code>config_manager</code> (optional) – the <a href="config_manager.html">config manager</a> your app should use, default is the inbuilt <code>FsConfigManager::new()</code></li>
</ul>
<h2 id="usage"><a class="header" href="#usage">Usage</a></h2>
<p>Once you've got that out of the way, go ahead and define your templates as usual, and then run the following command in your project's directory:</p>
<pre><code>perseus serve
</code></pre>
<p>That will automatically prepare the CLI to work with your app, then it will build your app and statically generate everything as appropriate (using any custom config manager your specified), and then it will serve your app on <a href="http://localhost:8080">http://localhost:8080</a> by default!</p>
<p>If you want to change the host/port your app is served on, just set the <code>HOST</code>/<code>PORT</code> environment variables as you'd like.</p>
<h2 id="other-commands"><a class="header" href="#other-commands">Other Commands</a></h2>
<p>If you just want to build your app, you can run <code>perseus build</code>. If you only want to prepare the CLI to interface with your app (which creates a <code>.perseus/</code> directory), you can run <code>perseus prep</code>.</p>
<p>If you want to serve pre-built files (which you'll have to generate with <code>perseus build</code>), you can run <code>perseus serve --no-build</code>.</p>
<h2 id="watching"><a class="header" href="#watching">Watching</a></h2>
<p>All these commands act statically, they don't watch your code for any changes. This feature will be added <em>very</em> soon to the CLI, but until it is, we advise you to use a tool like <a href="https://github.com/eradman/entr"><code>entr</code></a>, which you can make work with Perseus like so (on Linux):</p>
<pre><code>find . -not -path &quot;./.perseus/*&quot; -not -path &quot;./target/*&quot; | entr -s &quot;perseus serve&quot;
</code></pre>
<p>This just lists all files except those in <code>.perseus/</code> and <code>target/</code> and runs <code>perseus serve</code> on any changes. You should exclude anything else as necessary.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                                                    <a rel="prev" href="tutorials/first_app/setup.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        
                                                    <a rel="next" href="templates.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                                    <a rel="prev" href="tutorials/first_app/setup.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                
                                    <a rel="next" href="templates.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        
    </body>
</html>
